{"ast":null,"code":"// src/services/programService.ts\n\n//import { v4 as uuidv4 } from 'uuid';\n\n// Define the base API URL\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3000/api';\n\n// Types\n\n// Fetch all programs\nexport const getAllPrograms = async () => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await fetch(`${API_URL}/programs`, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      throw new Error('Failed to fetch programs');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error in getAllPrograms:', error);\n    return [];\n  }\n};\n\n// Fetch programs by department\nexport const getProgramsByDepartment = async departmentId => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await fetch(`${API_URL}/programs/department/${departmentId}`, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      throw new Error('Failed to fetch programs by department');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(`Error in getProgramsByDepartment for departmentId ${departmentId}:`, error);\n    return [];\n  }\n};\n\n// Fetch a single program by ID\nexport const getProgramById = async id => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await fetch(`${API_URL}/programs/${id}`, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      throw new Error('Failed to fetch program');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(`Error in getProgramById for ID ${id}:`, error);\n    return null;\n  }\n};\n\n// Create a new program\nexport const createProgram = async program => {\n  try {\n    const token = localStorage.getItem('token');\n\n    // If no ID is provided, generate one\n    //if (!program.program_id) {\n    //  program.program_id = `PROG-${uuidv4().substring(0, 8)}`;\n    //}\n\n    const response = await fetch(`${API_URL}/programs`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(program)\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to create program');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error in createProgram:', error);\n    throw error;\n  }\n};\n\n// Update an existing program\nexport const updateProgram = async (id, program) => {\n  try {\n    const token = localStorage.getItem('token');\n    console.log(`Making PUT request to: ${API_URL}/programs/${id}`, program);\n    const response = await fetch(`${API_URL}/programs/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(program)\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to update program');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(`Error in updateProgram for ID ${id}:`, error);\n    throw error;\n  }\n};\n\n// Delete a program\nexport const deleteProgram = async id => {\n  try {\n    const token = localStorage.getItem('token');\n    console.log(`Making DELETE request to: ${API_URL}/programs/${id}`);\n    const response = await fetch(`${API_URL}/programs/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to delete program');\n    }\n\n    // Handle 204 No Content or empty responses\n    if (response.status === 204 || response.headers.get('content-length') === '0') {\n      return {\n        success: true,\n        message: 'Program deleted successfully'\n      };\n    }\n\n    // Only try to parse JSON if there's a response body\n    try {\n      const data = await response.json();\n      return {\n        success: true,\n        message: data.message || 'Program deleted successfully'\n      };\n    } catch (parseError) {\n      // If JSON parsing fails, still return success since the request succeeded\n      return {\n        success: true,\n        message: 'Program deleted successfully'\n      };\n    }\n  } catch (error) {\n    console.error(`Error in deleteProgram for ID ${id}:`, error);\n    throw error;\n  }\n};\n\n// Delete multiple programs\nexport const deletePrograms = async ids => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await fetch(`${API_URL}/programs/batch-delete`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        ids\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to delete programs');\n    }\n    const data = await response.json();\n    return {\n      success: true,\n      message: data.message || 'Programs deleted successfully'\n    };\n  } catch (error) {\n    console.error(`Error in deletePrograms:`, error);\n    throw error;\n  }\n};\nconst programService = {\n  getAllPrograms,\n  getProgramsByDepartment,\n  getProgramById,\n  createProgram,\n  updateProgram,\n  deleteProgram,\n  deletePrograms\n};\nexport default programService;","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","getAllPrograms","token","localStorage","getItem","response","fetch","headers","ok","Error","data","json","error","console","getProgramsByDepartment","departmentId","getProgramById","id","createProgram","program","method","body","JSON","stringify","errorData","message","updateProgram","log","deleteProgram","status","get","success","parseError","deletePrograms","ids","programService"],"sources":["/Users/tanvinaraynagowda/University-Scheduler--1/frontend/src/services/programService.ts"],"sourcesContent":["// src/services/programService.ts\n\n//import { v4 as uuidv4 } from 'uuid';\n\n// Define the base API URL\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3000/api';\n\n// Types\nexport interface Program {\n  program_id: string;\n  department_id: string;\n  name: string;\n  description?: string;\n  created_at?: string;\n  updated_at?: string;\n}\n\nexport interface ProgramDetail extends Program {\n  department?: any;\n  courses?: any[];\n}\n\n// Fetch all programs\nexport const getAllPrograms = async (): Promise<Program[]> => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await fetch(`${API_URL}/programs`, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch programs');\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error in getAllPrograms:', error);\n    return [];\n  }\n};\n\n// Fetch programs by department\nexport const getProgramsByDepartment = async (departmentId: string): Promise<Program[]> => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await fetch(`${API_URL}/programs/department/${departmentId}`, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch programs by department');\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(`Error in getProgramsByDepartment for departmentId ${departmentId}:`, error);\n    return [];\n  }\n};\n\n// Fetch a single program by ID\nexport const getProgramById = async (id: string): Promise<ProgramDetail | null> => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await fetch(`${API_URL}/programs/${id}`, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch program');\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(`Error in getProgramById for ID ${id}:`, error);\n    return null;\n  }\n};\n\n// Create a new program\nexport const createProgram = async (program: Partial<Program>): Promise<Program> => {\n  try {\n    const token = localStorage.getItem('token');\n    \n    // If no ID is provided, generate one\n    //if (!program.program_id) {\n    //  program.program_id = `PROG-${uuidv4().substring(0, 8)}`;\n    //}\n    \n    const response = await fetch(`${API_URL}/programs`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(program)\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to create program');\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error in createProgram:', error);\n    throw error;\n  }\n};\n\n// Update an existing program\nexport const updateProgram = async (id: string, program: Partial<Program>): Promise<Program> => {\n  try {\n    const token = localStorage.getItem('token');\n    console.log(`Making PUT request to: ${API_URL}/programs/${id}`, program);\n    \n    const response = await fetch(`${API_URL}/programs/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(program)\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to update program');\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(`Error in updateProgram for ID ${id}:`, error);\n    throw error;\n  }\n};\n\n// Delete a program\nexport const deleteProgram = async (id: string): Promise<{ success: boolean; message: string }> => {\n  try {\n    const token = localStorage.getItem('token');\n    console.log(`Making DELETE request to: ${API_URL}/programs/${id}`);\n    \n    const response = await fetch(`${API_URL}/programs/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to delete program');\n    }\n\n    // Handle 204 No Content or empty responses\n    if (response.status === 204 || response.headers.get('content-length') === '0') {\n      return { \n        success: true, \n        message: 'Program deleted successfully' \n      };\n    }\n\n    // Only try to parse JSON if there's a response body\n    try {\n      const data = await response.json();\n      return { \n        success: true, \n        message: data.message || 'Program deleted successfully' \n      };\n    } catch (parseError) {\n      // If JSON parsing fails, still return success since the request succeeded\n      return { \n        success: true, \n        message: 'Program deleted successfully' \n      };\n    }\n  } catch (error) {\n    console.error(`Error in deleteProgram for ID ${id}:`, error);\n    throw error;\n  }\n};\n\n// Delete multiple programs\nexport const deletePrograms = async (ids: string[]): Promise<{ success: boolean; message: string }> => {\n  try {\n    const token = localStorage.getItem('token');\n    const response = await fetch(`${API_URL}/programs/batch-delete`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ ids })\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to delete programs');\n    }\n\n    const data = await response.json();\n    return { success: true, message: data.message || 'Programs deleted successfully' };\n  } catch (error) {\n    console.error(`Error in deletePrograms:`, error);\n    throw error;\n  }\n};\n\nconst programService = {\n  getAllPrograms,\n  getProgramsByDepartment,\n  getProgramById,\n  createProgram,\n  updateProgram,\n  deleteProgram,\n  deletePrograms\n};\n\nexport default programService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}